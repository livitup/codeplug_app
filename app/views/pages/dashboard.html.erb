<div class="container mt-4">
  <h1 class="mb-4">Dashboard</h1>

  <!-- Stats Cards -->
  <div class="row g-4 mb-4">
    <div class="col-md-4">
      <div class="card h-100">
        <div class="card-body text-center">
          <h2 class="display-4 fw-bold text-primary"><%= @codeplugs_count %></h2>
          <p class="text-muted mb-0">Codeplugs</p>
          <%= link_to "View All", codeplugs_path, class: "stretched-link" %>
        </div>
      </div>
    </div>

    <div class="col-md-4">
      <div class="card h-100">
        <div class="card-body text-center">
          <h2 class="display-4 fw-bold text-success"><%= @zones_count %></h2>
          <p class="text-muted mb-0">Zones</p>
          <%= link_to "View All", zones_path, class: "stretched-link" %>
        </div>
      </div>
    </div>

    <div class="col-md-4">
      <div class="card h-100">
        <div class="card-body text-center">
          <h2 class="display-4 fw-bold text-info"><%= @public_zones_count %></h2>
          <p class="text-muted mb-0">Public Zones</p>
          <%= link_to "Browse", zones_path, class: "stretched-link" %>
        </div>
      </div>
    </div>
  </div>

  <!-- Quick Actions -->
  <div class="row mb-4">
    <div class="col-12">
      <div class="card">
        <div class="card-body">
          <h5 class="card-title mb-3">Quick Actions</h5>
          <div class="d-flex gap-3 flex-wrap">
            <%= link_to new_codeplug_path, class: "btn btn-primary" do %>
              <i class="bi bi-plus-circle me-2"></i>New Codeplug
            <% end %>
            <%= link_to new_zone_path, class: "btn btn-success" do %>
              <i class="bi bi-plus-circle me-2"></i>New Zone
            <% end %>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Recent Items -->
  <div class="row g-4">
    <!-- Recent Codeplugs -->
    <div class="col-md-6">
      <div class="card h-100">
        <div class="card-header bg-light d-flex justify-content-between align-items-center">
          <h5 class="mb-0">Recent Codeplugs</h5>
          <%= link_to "View All", codeplugs_path, class: "btn btn-sm btn-outline-primary" %>
        </div>
        <div class="card-body">
          <% if @recent_codeplugs.any? %>
            <div class="list-group list-group-flush">
              <% @recent_codeplugs.each do |codeplug| %>
                <%= link_to codeplug_path(codeplug), class: "list-group-item list-group-item-action d-flex justify-content-between align-items-center" do %>
                  <div>
                    <strong><%= codeplug.name %></strong>
                    <% if codeplug.description.present? %>
                      <br><small class="text-muted"><%= truncate(codeplug.description, length: 50) %></small>
                    <% end %>
                  </div>
                  <small class="text-muted"><%= time_ago_in_words(codeplug.created_at) %> ago</small>
                <% end %>
              <% end %>
            </div>
          <% else %>
            <p class="text-muted text-center mb-0">
              No codeplugs yet. <%= link_to "Create your first one", new_codeplug_path %>!
            </p>
          <% end %>
        </div>
      </div>
    </div>

    <!-- Recent Zones -->
    <div class="col-md-6">
      <div class="card h-100">
        <div class="card-header bg-light d-flex justify-content-between align-items-center">
          <h5 class="mb-0">Recent Zones</h5>
          <%= link_to "View All", zones_path, class: "btn btn-sm btn-outline-success" %>
        </div>
        <div class="card-body">
          <% if @recent_zones.any? %>
            <div class="list-group list-group-flush">
              <% @recent_zones.each do |zone| %>
                <%= link_to zone_path(zone), class: "list-group-item list-group-item-action d-flex justify-content-between align-items-center" do %>
                  <div>
                    <strong><%= zone.name %></strong>
                    <% if zone.public? %>
                      <span class="badge bg-success ms-2">Public</span>
                    <% else %>
                      <span class="badge bg-secondary ms-2">Private</span>
                    <% end %>
                  </div>
                  <small class="text-muted"><%= time_ago_in_words(zone.created_at) %> ago</small>
                <% end %>
              <% end %>
            </div>
          <% else %>
            <p class="text-muted text-center mb-0">
              No zones yet. <%= link_to "Create your first one", new_zone_path %>!
            </p>
          <% end %>
        </div>
      </div>
    </div>
  </div>
</div>
